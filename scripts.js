let cardContents = [
    {
        topImg: './images/mathe.jpg',
        question: `Was erhält man, wenn man
                  <br>1/1 + 1/2 + 1/3 + ...
                  <br>bis zur Unendlichkeit addiert?`,
        answers: {
                    wrongAnswers: ['100π', '-1/12', 'man weiß es bis heute nicht'],
                    correctAnswer: 'Unendlich'
                },
        infoText: `Tatsächlich ist es unendlich!
                  <br><a href="https://de.wikibooks.org/wiki/Mathe_f%C3%BCr_Nicht-Freaks:_Harmonische_Reihe" target="_blank">Hier geht es zum Beweis</a>`
    },
    {
        topImg: './images/mathe.jpg',
        question: `Wie dick müsste der Spinnenwebfaden sein,
                  <br>wenn Spiderman Mary-Jane beim Sturz aus 
                  <br>100 Metern Höhe rettet?`,
        answers: {
                    wrongAnswers: ['20 Zentimeter', '5 Meter', 'man weiß es bis heute nicht'],
                    correctAnswer: '2 Millimeter'
                },
        infoText: `Spinnenseide ist das belastbarste Material, das man aus der Natur kennt.
                  <br><a href="https://www.deutschlandfunknova.de/beitrag/das-netz-der-madagaskar-seidenspinne-reissfester-als-stahl-dehnbarer-als-nylon#:~:text=Der%20Faden%20der%20Madagaskar%2DSeidenspinne,gleichzeitig%20aber%20dehnbarer%20als%20Nylon." target="_blank">Hier weitere Infos zu dem Thema</a>`
    },
    {
        topImg: './images/mathe.jpg',
        question: `Was erhält man, wenn man
                  <br>1/1 + 1/2 + 1/3 + ...
                  <br>bis zur Unendlichkeit addiert?`,
        answers: {
                    wrongAnswers: ['100π', '-1/12', 'man weiß es bis heute nicht'],
                    correctAnswer: 'Unendlich'
                },
        infoText: `Tatsächlich ist es unendlich!
                  <br><a href="https://de.wikibooks.org/wiki/Mathe_f%C3%BCr_Nicht-Freaks:_Harmonische_Reihe" target="_blank">Hier geht es zum Beweis</a>`
    },
    {
        topImg: './images/mathe.jpg',
        question: `Was erhält man, wenn man
                  <br>1/1 + 1/2 + 1/3 + ...
                  <br>bis zur Unendlichkeit addiert?`,
        answers: {
                    wrongAnswers: ['100π', '-1/12', 'man weiß es bis heute nicht'],
                    correctAnswer: 'Unendlich'
                },
        infoText: `Tatsächlich ist es unendlich!
                  <br><a href="https://de.wikibooks.org/wiki/Mathe_f%C3%BCr_Nicht-Freaks:_Harmonische_Reihe" target="_blank">Hier geht es zum Beweis</a>`
    },
    {
        topImg: './images/mathe.jpg',
        question: `Was erhält man, wenn man
                  <br>1/1 + 1/2 + 1/3 + ...
                  <br>bis zur Unendlichkeit addiert?`,
        answers: {
                    wrongAnswers: ['100π', '-1/12', 'man weiß es bis heute nicht'],
                    correctAnswer: 'Unendlich'
                },
        infoText: `Tatsächlich ist es unendlich!
                  <br><a href="https://de.wikibooks.org/wiki/Mathe_f%C3%BCr_Nicht-Freaks:_Harmonische_Reihe" target="_blank">Hier geht es zum Beweis</a>`
    },
    {
        topImg: './images/mathe.jpg',
        question: `Was erhält man, wenn man
                  <br>1/1 + 1/2 + 1/3 + ...
                  <br>bis zur Unendlichkeit addiert?`,
        answers: {
                    wrongAnswers: ['100π', '-1/12', 'man weiß es bis heute nicht'],
                    correctAnswer: 'Unendlich'
                },
        infoText: `Tatsächlich ist es unendlich!
                  <br><a href="https://de.wikibooks.org/wiki/Mathe_f%C3%BCr_Nicht-Freaks:_Harmonische_Reihe" target="_blank">Hier geht es zum Beweis</a>`
    },
    {
        topImg: './images/mathe.jpg',
        question: `Was erhält man, wenn man
                  <br>1/1 + 1/2 + 1/3 + ...
                  <br>bis zur Unendlichkeit addiert?`,
        answers: {
                    wrongAnswers: ['100π', '-1/12', 'man weiß es bis heute nicht'],
                    correctAnswer: 'Unendlich'
                },
        infoText: `Tatsächlich ist es unendlich!
                  <br><a href="https://de.wikibooks.org/wiki/Mathe_f%C3%BCr_Nicht-Freaks:_Harmonische_Reihe" target="_blank">Hier geht es zum Beweis</a>`
    },
    {
        topImg: './images/mathe.jpg',
        question: `Was erhält man, wenn man
                  <br>1/1 + 1/2 + 1/3 + ...
                  <br>bis zur Unendlichkeit addiert?`,
        answers: {
                    wrongAnswers: ['100π', '-1/12', 'man weiß es bis heute nicht'],
                    correctAnswer: 'Unendlich'
                },
        infoText: `Tatsächlich ist es unendlich!
                  <br><a href="https://de.wikibooks.org/wiki/Mathe_f%C3%BCr_Nicht-Freaks:_Harmonische_Reihe" target="_blank">Hier geht es zum Beweis</a>`
    },
    {
        topImg: './images/mathe.jpg',
        question: `Was erhält man, wenn man
                  <br>1/1 + 1/2 + 1/3 + ...
                  <br>bis zur Unendlichkeit addiert?`,
        answers: {
                    wrongAnswers: ['100π', '-1/12', 'man weiß es bis heute nicht'],
                    correctAnswer: 'Unendlich'
                },
        infoText: `Tatsächlich ist es unendlich!
                  <br><a href="https://de.wikibooks.org/wiki/Mathe_f%C3%BCr_Nicht-Freaks:_Harmonische_Reihe" target="_blank">Hier geht es zum Beweis</a>`
    },
    {
        topImg: './images/mathe.jpg',
        question: `Was erhält man, wenn man
                  <br>1/1 + 1/2 + 1/3 + ...
                  <br>bis zur Unendlichkeit addiert?`,
        answers: {
                    wrongAnswers: ['100π', '-1/12', 'man weiß es bis heute nicht'],
                    correctAnswer: 'Unendlich'
                },
        infoText: `Tatsächlich ist es unendlich!
                  <br><a href="https://de.wikibooks.org/wiki/Mathe_f%C3%BCr_Nicht-Freaks:_Harmonische_Reihe" target="_blank">Hier geht es zum Beweis</a>`
    },
    {
        topImg: './images/mathe.jpg',
        question: `Was erhält man, wenn man
                  <br>1/1 + 1/2 + 1/3 + ...
                  <br>bis zur Unendlichkeit addiert?`,
        answers: {
                    wrongAnswers: ['100π', '-1/12', 'man weiß es bis heute nicht'],
                    correctAnswer: 'Unendlich'
                },
        infoText: `Tatsächlich ist es unendlich!
                  <br><a href="https://de.wikibooks.org/wiki/Mathe_f%C3%BCr_Nicht-Freaks:_Harmonische_Reihe" target="_blank">Hier geht es zum Beweis</a>`
    },
    {
        topImg: './images/mathe.jpg',
        question: `Was erhält man, wenn man
                  <br>1/1 + 1/2 + 1/3 + ...
                  <br>bis zur Unendlichkeit addiert?`,
        answers: {
                    wrongAnswers: ['100π', '-1/12', 'man weiß es bis heute nicht'],
                    correctAnswer: 'Unendlich'
                },
        infoText: `Tatsächlich ist es unendlich!
                  <br><a href="https://de.wikibooks.org/wiki/Mathe_f%C3%BCr_Nicht-Freaks:_Harmonische_Reihe" target="_blank">Hier geht es zum Beweis</a>`
    },
    {
        topImg: './images/mathe.jpg',
        question: `Was erhält man, wenn man
                  <br>1/1 + 1/2 + 1/3 + ...
                  <br>bis zur Unendlichkeit addiert?`,
        answers: {
                    wrongAnswers: ['100π', '-1/12', 'man weiß es bis heute nicht'],
                    correctAnswer: 'Unendlich'
                },
        infoText: `Tatsächlich ist es unendlich!
                  <br><a href="https://de.wikibooks.org/wiki/Mathe_f%C3%BCr_Nicht-Freaks:_Harmonische_Reihe" target="_blank">Hier geht es zum Beweis</a>`
    },
    {
        topImg: './images/mathe.jpg',
        question: `Was erhält man, wenn man
                  <br>1/1 + 1/2 + 1/3 + ...
                  <br>bis zur Unendlichkeit addiert?`,
        answers: {
                    wrongAnswers: ['100π', '-1/12', 'man weiß es bis heute nicht'],
                    correctAnswer: 'Unendlich'
                },
        infoText: `Tatsächlich ist es unendlich!
                  <br><a href="https://de.wikibooks.org/wiki/Mathe_f%C3%BCr_Nicht-Freaks:_Harmonische_Reihe" target="_blank">Hier geht es zum Beweis</a>`
    },
    {
        topImg: './images/mathe.jpg',
        question: `Was erhält man, wenn man
                  <br>1/1 + 1/2 + 1/3 + ...
                  <br>bis zur Unendlichkeit addiert?`,
        answers: {
                    wrongAnswers: ['100π', '-1/12', 'man weiß es bis heute nicht'],
                    correctAnswer: 'Unendlich'
                },
        infoText: `Tatsächlich ist es unendlich!
                  <br><a href="https://de.wikibooks.org/wiki/Mathe_f%C3%BCr_Nicht-Freaks:_Harmonische_Reihe" target="_blank">Hier geht es zum Beweis</a>`
    },
    {
        topImg: './images/mathe.jpg',
        question: `Was erhält man, wenn man
                  <br>1/1 + 1/2 + 1/3 + ...
                  <br>bis zur Unendlichkeit addiert?`,
        answers: {
                    wrongAnswers: ['100π', '-1/12', 'man weiß es bis heute nicht'],
                    correctAnswer: 'Unendlich'
                },
        infoText: `Tatsächlich ist es unendlich!
                  <br><a href="https://de.wikibooks.org/wiki/Mathe_f%C3%BCr_Nicht-Freaks:_Harmonische_Reihe" target="_blank">Hier geht es zum Beweis</a>`
    },
    {
        topImg: './images/mathe.jpg',
        question: `Was erhält man, wenn man
                  <br>1/1 + 1/2 + 1/3 + ...
                  <br>bis zur Unendlichkeit addiert?`,
        answers: {
                    wrongAnswers: ['100π', '-1/12', 'man weiß es bis heute nicht'],
                    correctAnswer: 'Unendlich'
                },
        infoText: `Tatsächlich ist es unendlich!
                  <br><a href="https://de.wikibooks.org/wiki/Mathe_f%C3%BCr_Nicht-Freaks:_Harmonische_Reihe" target="_blank">Hier geht es zum Beweis</a>`
    },
    {
        topImg: './images/mathe.jpg',
        question: `Was erhält man, wenn man
                  <br>1/1 + 1/2 + 1/3 + ...
                  <br>bis zur Unendlichkeit addiert?`,
        answers: {
                    wrongAnswers: ['100π', '-1/12', 'man weiß es bis heute nicht'],
                    correctAnswer: 'Unendlich'
                },
        infoText: `Tatsächlich ist es unendlich!
                  <br><a href="https://de.wikibooks.org/wiki/Mathe_f%C3%BCr_Nicht-Freaks:_Harmonische_Reihe" target="_blank">Hier geht es zum Beweis</a>`
    },
    {
        topImg: './images/mathe.jpg',
        question: `Was erhält man, wenn man
                  <br>1/1 + 1/2 + 1/3 + ...
                  <br>bis zur Unendlichkeit addiert?`,
        answers: {
                    wrongAnswers: ['100π', '-1/12', 'man weiß es bis heute nicht'],
                    correctAnswer: 'Unendlich'
                },
        infoText: `Tatsächlich ist es unendlich!
                  <br><a href="https://de.wikibooks.org/wiki/Mathe_f%C3%BCr_Nicht-Freaks:_Harmonische_Reihe" target="_blank">Hier geht es zum Beweis</a>`
    },
    {
        topImg: './images/mathe.jpg',
        question: `Was erhält man, wenn man
                  <br>1/1 + 1/2 + 1/3 + ...
                  <br>bis zur Unendlichkeit addiert?`,
        answers: {
                    wrongAnswers: ['100π', '-1/12', 'man weiß es bis heute nicht'],
                    correctAnswer: 'Unendlich'
                },
        infoText: `Tatsächlich ist es unendlich!
                  <br><a href="https://de.wikibooks.org/wiki/Mathe_f%C3%BCr_Nicht-Freaks:_Harmonische_Reihe" target="_blank">Hier geht es zum Beweis</a>`
    },
];
let i = 0;
let randomNumber = 0;
let correctlyAnswered = 0;
let widthPerceBar = 0;
let questionsAmount = cardContents.length;
let cardContentTemplate = /* HTML */ `
    <div class="imageTop disFlexColumnCenter">
        <img src="${cardContents[i].topImg}" class="card-img-top" alt="Mathe-Bild">
    </div>
    <div class="card-body disFlexColumnCenter">
    <h5 class="card-title">
        ${cardContents[i].question}
    </h5>
    <div class="answerBlock disFlexColumnCenter">
        <a href="#" class="btn btn-primary"></a>
        <a href="#" class="btn btn-primary"></a>
        <a href="#" class="btn btn-primary"></a>
        <a href="#" class="btn btn-primary"></a>
    </div>
        <div class="extraInfo displayNone disFlexColumnCenter">
            <p>
                ${cardContents[i].infoText}
            </p>
        </div>
    </div>
`;
let clickAnsw = function clickAnswer(event) {
    event.preventDefault();
    if(document.querySelector('.card').classList.contains('answered')) {
        return;
    }else {
        document.querySelector('.card').classList.add('answered');
        if(event.target.classList.contains('correct')) {
            event.target.style.backgroundColor = 'green'
            event.target.style.color = 'white';
            correctlyAnswered++;
        }else {
            event.target.style.backgroundColor = 'red';
            event.target.style.color = 'white';
            document.querySelector('.answerBlock a.correct').style.backgroundColor = 'green';
            document.querySelector('.answerBlock a.correct').style.color = "white";
            document.querySelector('.extraInfo').classList.remove('displayNone');
        }
    }
    perceBarLength();
}

function renderCard() {
    document.querySelector('.nextQuestion').classList.add('displayNone');
    document.querySelector('.card').innerHTML = '';
    document.querySelector('.card').innerHTML = cardContentTemplate;
    document.querySelector('.card').classList.remove('answered');
    setCorrectWrong();
    addAnswerClick();
}

function setCorrectWrong() {
    let answers = document.querySelectorAll('.answerBlock a');
    for(let k=0; k<4; k++) {
        answers[k].classList.add('wrong');
        answers[k].addEventListener('click', clickAnsw);
    }
    randomNumber = parseInt(Math.floor(Math.random()*4));
    answers[randomNumber].classList.remove('wrong');
    answers[randomNumber].classList.add('correct');
    setAnswers();
}

function setAnswers() {
    let wrongAnswers = document.querySelectorAll('.answerBlock a.wrong');
    for(let j=0; j<cardContents[i].answers.wrongAnswers.length; j++) {
        wrongAnswers[j].innerHTML = cardContents[i].answers.wrongAnswers[j];
    }
    document.querySelector('.answerBlock a.correct').innerHTML = cardContents[i].answers.correctAnswer;
}

function perceBarLength(perce = 0) {
    perce++;
    if(perce < 101) {
        if(perce === 1) {
            document.querySelector('.perceBar .inner').querySelector('p').innerHTML = (i+1)+"/"+questionsAmount;
        }
        widthPerceBar += (perce/questionsAmount/50);
        document.querySelector('.perceBar .inner').style.width = `${widthPerceBar}%`;
        setTimeout(()=>{perceBarLength(perce)}, 1);
    }else {
        document.querySelector('.nextQuestion').classList.remove('displayNone');
        return;
    }
}

function nextCard() {
    i++;
    if(i === questionsAmount) {
        document.querySelector('.card').classList.add("displayNone");
        document.querySelector('.resultsScreen').remove("displayNone");
    }else {
        renderCard();
    }
}

function addAnswerClick() {
    for(let l=0; l<4; l++) {
        document.querySelectorAll('.answerBlock a')[l].addEventListener('click', clickAnsw);
    }
}s